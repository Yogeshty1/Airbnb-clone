<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wanderlust</title>
  </head> -->

  <% layout('layouts/boilerplate') -%>
<div class="col-8 offset-2">
    <h3><%= listing.title %> </h3>
    </body>
    </div>
    <div class="card col-6 offset-3 show-card">
      <div class="card" style="width: 18rem;">
  <img src="<%= listing.image %>" class="card-img-top show-img" alt="listing_image">
  <div class="card-body">
    <p class="card-text">
      <%= listing.description %><br>
      &#8377; <%= listing.price.toLocaleString("en-IN") %><br>
      <%= listing.location %><br>
      <%= listing.country %><br>
    </p> </div>
</div>
    </div>
   
   <div class="btns"> 
    <a href="/listings/<%= listing._id %>/edit" class="btn btn-dark add-btn  offset-3">Edit</a>
    <form method="POST" action="/listings/<%=listing._id%>?_method=DELETE" class="d-inline-block">
      <button class="btn btn-dark add-btn offset-4">Delete</button>
    </form>
    </div>
<!-- </html> -->
 <hr> <br>
  <div class="col-8 offset-3">
   <h4> Leave a review</h4>
   <form method="POST" action="/listings/<%= listing._id %>/reviews" novalidate class="needs-validation">
     <div class="mb-3">
       <label for="rating" class="form-label">Rating: <span id="ratingValue" class="badge bg-primary">3</span></label>
       <div class="d-flex align-items-center justify-content-center">
         <div class="position-relative" style="width: 50%;">
           <input type="range" min="1" max="5" id="rating" name="review[rating]" class="form-range w-100" value="3">
           <div class="d-flex justify-content-between position-absolute w-100" style="top: 20px;">
             <span class="small text-muted">1</span>
             <span class="small text-muted">2</span>
             <span class="small text-muted">3</span>
             <span class="small text-muted">4</span>
             <span class="small text-muted">5</span>
           </div>
         </div>
       </div>
     </div>
     <div class="mb-3">
      <label for="comment" class="form-label">Comments</label>
      <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control" required></textarea>
      <div class="invalid-feedback">Please enter a comment.</div>
    </div>
     <button type="submit" class="btn btn-primary">Submit</button>
   </form>

   <hr>

 
  <p><b>All reviews </b></p>

  <div class="row g-3">
  <% for (let review of listing.reviews) { %>
    <div class="col-12 col-md-6">
      <div class ="card review-card">
        <div class="card-body">
          <h5 class="card-title">Jane Doe</h5>
          <p class="card-text mb-0">
            <%= review.comment %>
            <span class="ms-1 badge bg-primary"><%= review.rating %>Star</span>
          </p>
        </div>
        <form method="POST" action="/listings/<%= listing._id %>/reviews/<%= review._id %>?_method=DELETE" class="mb-3 d-inline">
          <button class="btn btn-sm btn-dark">Delete</button>
        </form>
      </div>
    </div>
  <% } %>
  </div>
</div>


<script>
document.getElementById('rating').addEventListener('input', function() {
  document.getElementById('ratingValue').textContent = this.value;
});
</script>


